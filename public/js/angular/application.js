var app=angular.module("ttr",["ui.bootstrap"]);app.controller("runPaginationController",["$scope","$http",function(e,a){e.filter=[],e.currentPage=1,e.numPerPage=10,e.maxSize=10,e.totalItems=100,e.searchQuery="",e.makeList=function(){e.races=[],$("#runTown").length>0&&(e.searchQuery=$("#runTown").val()),a.get("/race/list/"+e.searchQuery,{cache:!0}).success(function(a){for(var t=0;t<a.length;t++)e.races.push({id:a[t].id,name:a[t].name,slug:a[t].slug,town:a[t].town,distance:a[t].distance,start_datetime:a[t].start_datetime,done:!1});e.totalItems=e.races.length})},e.makeList(),$(".search-field").on("keyup",function(){delay(function(){e.makeList()},200)}),$(".search-clear").on("click",function(){$(".search-field").val(""),e.searchQuery="",e.makeList()}),e.$watch("currentPage + numPerPage + races + searchQuery",function(){var a=(e.currentPage-1)*e.numPerPage,t=a+e.numPerPage;e.numPages=function(){return Math.ceil(e.races.length/e.numPerPage)},e.filter=e.races.slice(a,t)})}]);var delay=function(){var e=0;return function(a,t){clearTimeout(e),e=setTimeout(a,t)}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL3J1blBhZ2luYXRpb25Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEdBQUEsS0FBQSxRQUFBLE9BQUEsT0FBQSxnQkNBQSxLQUFBLFdBQUEsMkJBQUEsU0FBQSxRQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsVUFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFdBQUEsR0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFdBQUEsSUFDQSxFQUFBLFlBQUEsR0FHQSxFQUFBLFNBQUEsV0FDQSxFQUFBLFNBRUEsRUFBQSxZQUFBLE9BQUEsSUFDQSxFQUFBLFlBQUEsRUFBQSxZQUFBLE9BR0EsRUFBQSxJQUFBLGNBQUEsRUFBQSxhQUFBLE9BQUEsSUFDQSxRQUFBLFNBQUEsR0FFQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxNQUFBLE1BQ0EsR0FBQSxFQUFBLEdBQUEsR0FDQSxLQUFBLEVBQUEsR0FBQSxLQUNBLEtBQUEsRUFBQSxHQUFBLEtBQ0EsS0FBQSxFQUFBLEdBQUEsS0FDQSxTQUFBLEVBQUEsR0FBQSxTQUNBLGVBQUEsRUFBQSxHQUFBLGVBQ0EsTUFBQSxHQUlBLEdBQUEsV0FBQSxFQUFBLE1BQUEsVUFJQSxFQUFBLFdBRUEsRUFBQSxpQkFBQSxHQUFBLFFBQUEsV0FDQSxNQUFBLFdBQ0EsRUFBQSxZQUNBLE9BR0EsRUFBQSxpQkFBQSxHQUFBLFFBQUEsV0FDQSxFQUFBLGlCQUFBLElBQUEsSUFDQSxFQUFBLFlBQUEsR0FDQSxFQUFBLGFBR0EsRUFBQSxPQUFBLGlEQUFBLFdBQ0EsR0FBQSxJQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsV0FDQSxFQUFBLEVBQUEsRUFBQSxVQUVBLEdBQUEsU0FBQSxXQUNBLE1BQUEsTUFBQSxLQUFBLEVBQUEsTUFBQSxPQUFBLEVBQUEsYUFHQSxFQUFBLE9BQUEsRUFBQSxNQUFBLE1BQUEsRUFBQSxPQVVBLElBQUEsT0FBQSxXQUNBLEdBQUEsR0FBQSxDQUNBLE9BQUEsVUFBQSxFQUFBLEdBQ0EsYUFBQSxHQUNBLEVBQUEsV0FBQSxFQUFBIiwiZmlsZSI6ImFwcGxpY2F0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCd0dHInLCAgWyd1aS5ib290c3RyYXAnXSk7XG5cbiIsImFwcC5jb250cm9sbGVyKCdydW5QYWdpbmF0aW9uQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwKSB7XG5cbiAgICAkc2NvcGUuZmlsdGVyID0gW107XG4gICAgJHNjb3BlLmN1cnJlbnRQYWdlID0gMTtcbiAgICAkc2NvcGUubnVtUGVyUGFnZSA9IDEwO1xuICAgICRzY29wZS5tYXhTaXplID0gMTA7XG4gICAgJHNjb3BlLnRvdGFsSXRlbXMgPSAxMDA7XG4gICAgJHNjb3BlLnNlYXJjaFF1ZXJ5ID0gJyc7XG5cblxuICAgICRzY29wZS5tYWtlTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnJhY2VzID0gW107XG5cbiAgICAgICAgaWYgKCQoJyNydW5Ub3duJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlYXJjaFF1ZXJ5ID0gJCgnI3J1blRvd24nKS52YWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRodHRwLmdldChcIi9yYWNlL2xpc3QvXCIgKyAkc2NvcGUuc2VhcmNoUXVlcnksIHsgY2FjaGU6IHRydWV9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yYWNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXNwb25zZVtpXS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlc3BvbnNlW2ldLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbHVnOiByZXNwb25zZVtpXS5zbHVnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG93bjogcmVzcG9uc2VbaV0udG93bixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiByZXNwb25zZVtpXS5kaXN0YW5jZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X2RhdGV0aW1lOiByZXNwb25zZVtpXS5zdGFydF9kYXRldGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS50b3RhbEl0ZW1zID0gJHNjb3BlLnJhY2VzLmxlbmd0aDtcblxuICAgICAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUubWFrZUxpc3QoKTtcblxuICAgICQoJy5zZWFyY2gtZmllbGQnKS5vbigna2V5dXAnLCBmdW5jdGlvbigpe1xuICAgICAgICBkZWxheShmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLm1ha2VMaXN0KCk7XG4gICAgICAgIH0sIDIwMCApO1xuICAgIH0pO1xuXG4gICAgJCgnLnNlYXJjaC1jbGVhcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICQoJy5zZWFyY2gtZmllbGQnKS52YWwoJycpO1xuICAgICAgICAkc2NvcGUuc2VhcmNoUXVlcnkgPSAnJztcbiAgICAgICAgJHNjb3BlLm1ha2VMaXN0KCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuJHdhdGNoKFwiY3VycmVudFBhZ2UgKyBudW1QZXJQYWdlICsgcmFjZXMgKyBzZWFyY2hRdWVyeVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBiZWdpbiA9ICgoJHNjb3BlLmN1cnJlbnRQYWdlIC0gMSkgKiAkc2NvcGUubnVtUGVyUGFnZSksXG4gICAgICAgICAgICBlbmQgPSBiZWdpbiArICRzY29wZS5udW1QZXJQYWdlO1xuXG4gICAgICAgICRzY29wZS5udW1QYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoJHNjb3BlLnJhY2VzLmxlbmd0aCAvICRzY29wZS5udW1QZXJQYWdlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZmlsdGVyID0gJHNjb3BlLnJhY2VzLnNsaWNlKGJlZ2luLCBlbmQpO1xuICAgIH0pO1xuXG5cbn0pO1xuXG5cbi8qXG4gKiBEZW5uYSBmdW5rdGlvbiBiw7ZyIGxpZ2dhIG7DpWdvbiBhbm5hbnN0YW5zXG4gKi9cbnZhciBkZWxheSA9IChmdW5jdGlvbigpe1xuICAgIHZhciB0aW1lciA9IDA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrLCBtcyl7XG4gICAgICAgIGNsZWFyVGltZW91dCAodGltZXIpO1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKTtcbiAgICB9O1xufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=